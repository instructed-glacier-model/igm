# @package _global_

hydra:
  job:
    chdir: True

core:
  url_data: https://www.dropbox.com/scl/fo/kd7dix5j1tm75nj941pvi/h?rlkey=q7jtmf9yn3a970cqygdwne25j&dl=0
  logging: True
  logging_level: 30
  hardware.visible_gpus: [3]

defaults:
  - override /modules: [smb_simple, iceflow, time, thk, vert_flow, print_info, particles]
  - override /input: [load_ncdf]
  - override /output: [write_ncdf]
  # - override /hydra/launcher: joblib # no error but does not seem to work compared to if you call it on the command line...
  # experiment: params # can we make it work here?

  # How to override help:
  # - hydra/help: my_app_help
  # - override hydra/help: my_app_help

input:
  load_ncdf:
    input_file: data/input.nc

modules:
  smb_simple:
    array:
      - ["time", "gradabl", "gradacc", "ela", "accmax"]
      - [1900, 0.009, 0.005, 2800, 2.0]
      - [2000, 0.009, 0.005, 2900, 2.0]
      - [2100, 0.009, 0.005, 3300, 2.0]
  time:
    start: 1900.0
    end: 2000.0
    save: 10.0
  iceflow:
    iceflow:
      sliding_law:
        method: coulomb

output:
  write_ncdf:
    # output_file: aletsch_basic_test.nc
    vars_to_save: [topg, slidingco, smb, topg_initial, usurf, thk, velbar_mag, velsurf_mag, velbase_mag, basal_slope_dotted_velocity, effective_pressure, cavity_effective_pressure, channel_effective_pressure, dtopgdt_theory, dtopgdt_measured, quarrying_erosion, topg_net_erosion]
    
    
